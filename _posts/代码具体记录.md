# 代码具体记录

> 2020/7/11

~~~java
//Android开发学习第二天  -UI界面简单设计   （UIDemo项目）
//MainActicity.java
package com.example.uidemo;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.RadioGroup;
import android.widget.RatingBar;
import android.widget.SeekBar;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    TextView Display;
    Button buttonzuo,buttonyou,button_queding;
    Switch aswitch;
    ProgressBar ProgressBar;
    EditText editText;
    RadioGroup radioGroup;
    ImageView imageView;
    SeekBar seekBar;
    CheckBox checkBox_YuWen,checkBox2_ShuXue,checkBox3_YingYu;
    RatingBar ratingBar;
    String YuWen = "";
    String ShuXue = "";
    String YingYu = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Display = findViewById(R.id.TextView);
        buttonzuo = findViewById(R.id.button1);
        buttonyou = findViewById(R.id.button2);
        button_queding = findViewById(R.id.button3);
        aswitch = findViewById(R.id.switch1);
        ProgressBar = findViewById(R.id.progressBar3);
        editText = findViewById(R.id.editTextNumber);
        radioGroup = findViewById(R.id.RadioGroup);
        imageView = findViewById(R.id.imageView);
        seekBar = findViewById(R.id.seekBar);
        checkBox_YuWen = findViewById(R.id.checkBox);
        checkBox2_ShuXue = findViewById(R.id.checkBox2);
        checkBox3_YingYu = findViewById(R.id.checkBox3);
        ratingBar = findViewById(R.id.ratingBar);

        //用  匿名内部类  的方式实现 监听器
        buttonzuo.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Display.setText(R.string.button1);
            }
        });
        buttonyou.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Display.setText(R.string.button2);
            }
        });
        aswitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {   //bool变量  b  为开关状态
                if (b)
                    Display.setText(R.string.SwitchOn);
                else
                    Display.setText(R.string.SwitchOff);
            }
        });
        button_queding.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                String s = editText.getText().toString();
                if (TextUtils.isEmpty(s))           //判断s是否为空
                {
                    s = "0";
                }
                ProgressBar.setProgress(Integer.valueOf(s));
                Display.setText(s);
                //Integer.valueOf() 作用为将  string  转化为  int
                //animate  为过度动画，即 进度条 是 瞬间变化 还是 有一个过程
                //animate 可省略不写，即默认false  其需要API至少为24
            }
        });
        radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup radioGroup, int i) {    //i  为radioGroup选择的第几个
                if (i==R.id.radioButton)  //判断选中第几个
                {
                    imageView.setImageResource(R.mipmap.ic_launcher_round);
                }
                else
                {
                    imageView.setImageResource(R.drawable.ic_launcher_background);
                }
            }
        });
        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {    //i  为滑条的值  （即拖动了多少）
                Display.setText(String.valueOf(i));    //String.valueOf()  将  int  型转换为  string
            }
            //以下两项为  触控跟踪  暂时未学
            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        });
        checkBox_YuWen.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {    //b  判断是否被勾中
                if (b)
                {
                    YuWen = "语文";
                }
                else
                {
                    YuWen = "";
                }
                Display.setText(YuWen+ShuXue+YingYu);
            }
        });
        checkBox2_ShuXue.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                if (b)
                {
                    ShuXue = "数学";
                }
                else
                {
                    ShuXue = "";
                }
                Display.setText(YuWen+ShuXue+YingYu);
            }
        });
        checkBox3_YingYu.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                if (b)
                {
                    YingYu = "英语";
                }
                else
                {
                    YingYu = "";
                }
                Display.setText(YuWen+ShuXue+YingYu);
            }
        });
        ratingBar.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() {
            @Override
            public void onRatingChanged(RatingBar ratingBar, float v, boolean b) {    //v  为打星数
                //Toast,makeText  在当前屏幕上显示一会就消失的对话框
                //第一个参数  Context  第二个参数  为要显示的内容  第三个为显示的时间长短
                //.show()  不加不会显示
                Toast.makeText(getApplicationContext(),String.valueOf(v)+"星",Toast.LENGTH_SHORT).show();
            }
        });
    }
}
~~~







> 2020/7/12

~~~java
//项目1： 本地化   （Localization项目）
~~~



~~~java
//项目2： 屏幕反转不同布局界面      (Orientation项目)
//MainActivity.java
package com.example.orientation;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.os.PersistableBundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import org.w3c.dom.Text;

public class MainActivity extends AppCompatActivity {

    String TAG = "MyLog";
    Button button;
    TextView TextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {    ////savedInstanceState  参数即为传递用户数据，防止 屏幕反转 后丢失的
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button = findViewById(R.id.button);
        TextView = findViewById(R.id.textView);
        if (savedInstanceState!=null)    //判断是否为空，为空调用将会报错
        {
            //将此前保存的数据重新写入
            String s = savedInstanceState.getString("KEY");
            TextView.setText(s);
        }
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                TextView.setText("略略略");    //用以验证  屏幕反转后  当前用户信息将会丢失
            }
        });
    }

    //用以屏幕反转时保存用户的数据
    //非永久保存，当程序被后台杀掉时，数据仍会丢失
    @Override
    protected void onSaveInstanceState(@NonNull Bundle outState) {    //outState  可存储不同类型数据
        super.onSaveInstanceState(outState);
        outState.putString("KEY", TextView.getText().toString());    //将TextView中的Sting数据存储
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "onDestroy: ");
    }
}
~~~





~~~java
//项目3：ViewModel探究     （ViewModleTest项目）
//Gradle Scripts -> build.gradle (Module:app)
apply plugin: 'com.android.application'

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.1"

    defaultConfig {
        applicationId "com.example.viewmodeltest"
        minSdkVersion 16
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation 'androidx.appcompat:appcompat:1.1.0'
    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
        //此项直接关乎ViewModle实现方式，使用前应查阅最新官方文档
        implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'
    implementation 'android.arch.lifecycle:extensions:2.0.0'
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'androidx.test.ext:junit:1.1.1'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'

}





//MainActicity.java
package com.example.viewmodeltest;

import androidx.appcompat.app.AppCompatActivity;
import androidx.lifecycle.ViewModelProvider;
import androidx.lifecycle.ViewModelProviders;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {

    MyViewModel myViewModel;
    Button button1,button2;
    TextView TextView1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //ViewMode  此API常常改动，使用时请先查询官方文档
        myViewModel= new ViewModelProvider(this).get(MyViewModel.class);    //创建 ViewModel
        TextView1 = findViewById(R.id.textView);
        button1 = findViewById(R.id.button1);
        button2 = findViewById(R.id.button2);
        //注意使用myViewModel时应注意  在创建后才可  否则会闪退
        TextView1.setText(String.valueOf(myViewModel.Num));    //横竖屏切换时取回此前存储值
        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                myViewModel.Num ++;
                TextView1.setText(String.valueOf(myViewModel.Num));
            }
        });
        button2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                myViewModel.Num +=2;
                TextView1.setText(String.valueOf(myViewModel.Num));
            }
        });
    }
}
~~~







~~~java
//项目4： LiveData探究   （LiveDataTest项目）
//LiveData相比项目3，有三个textView.setText减少为1个，大大降低了底层代码的耦合性
//MainActivity.java
package com.example.livedatatest;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import androidx.lifecycle.Observer;
import androidx.lifecycle.ViewModelProvider;

import android.os.Bundle;
import android.os.PersistableBundle;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {
    ViewModelWithLiveData viewModelWithLiveData;
    TextView textView1;
    ImageButton imageButtonLike, imageButtonDislike;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView1 = findViewById(R.id.TextView1);
        imageButtonLike = findViewById(R.id.imageButton);
        imageButtonDislike = findViewById(R.id.imageButton2);

        viewModelWithLiveData = new ViewModelProvider(this).get(ViewModelWithLiveData.class);
        //对viewModleWithData.getLikeNum()设置了观测者（函数）  当其返回值发生改变时（int型）  执行onChanged中函数
        viewModelWithLiveData.getLikeNum().observe(this, new Observer<Integer>() {
            @Override
            public void onChanged(Integer integer) {
                textView1.setText(String.valueOf(integer));
            }
        });
        imageButtonLike.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                viewModelWithLiveData.AddLikeNum(1);
            }
        });
        imageButtonDislike.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                viewModelWithLiveData.AddLikeNum(-1);
            }
        });
    }
}


//build.gradle (module:app)
apply plugin: 'com.android.application'

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.1"

    defaultConfig {
        applicationId "com.example.livedatatest"
        minSdkVersion 16
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        android.defaultConfig.vectorDrawables.useSupportLibrary = true
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation 'androidx.appcompat:appcompat:1.1.0'
    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'androidx.test.ext:junit:1.1.1'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'
    //ViewModle所需API
    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'

}



//ViewModleWithLiveData  (自建类，继承子ViewModle(官方类))

package com.example.livedatatest;

import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.ViewModel;

public class ViewModelWithLiveData extends ViewModel {
    private MutableLiveData<Integer> LikeNum;
    /* ViewModelWithLiveData() {
           LikeNum = new MutableLiveData<>();
           LikeNum.setValue(0);
    } */
    public MutableLiveData<Integer> getLikeNum() {    //将其声明为返回型为  MutableLiveData  的函数，这样才可调用.observe观察函数
        if (LikeNum == null) {    //判断  LikeNum  是否为空  若为空则初始化赋值  (也可用构造函数的方法————见上一段注释)
            LikeNum = new MutableLiveData<>();
            LikeNum.setValue(0);
        }
        return LikeNum;
    }
    public void AddLikeNum (int n) {
        LikeNum.setValue(LikeNum.getValue()+n);
    }
}

~~~

